프로그래밍도 변수나 함수에 이름을 부여 하여 의미를 갖도록 한다.
**만약 이름이 없다면, 변수나 함수는 다만 그저 하나의 메모리 주소에 지나지 않는다.** 그래서 프로그램은 이름:값 의 대응표를 만들어 사용한다. 이 대응표의 이름을 가지고 코드를 보다 쉽게 이해 하고, 또 이름을 통해 값을 저장하고, 다시 가져와 수정한다.

초기 프로그래밍 언어는 이 대응표를 프로그램 전체에서 하나로 ㅗ간리 했는데, 여기에는 이름 충돌의 문제가 있었다. 그래서 충돌을 피하기 위해, 각 언어마다 "스코프"라는 규칙을 만들어 정의 하였다.
그렇게 스코프 규칙은 언어의 명세가 되었다.

1. 함수 레벨과 블록레벨의
2. 렉시컬 스코프 규칙

요즈음 ES6코드의 대부분은 var를 사용하지 않는다. var자체가 함수 레벨의 스코프를 가지기 때문에 블록레벨 스코프보다 더 많은 혼란을 야기 하기 때문이다.

렉시컬 스코프는 보통 동적 스코프와 많이 비교한다.

동적스코프는 프로그램의 런타임 도중의 실행 컨텍스트나 호출 컨텍스트에 의해 결정되고
렉시컬 스코프에서는 소스코드가 작성된 그 문맥에서 결정된다.
현대 프로그래밍에서 대부분의 언어들은 렉시컬 스코프 규칙을 따르고 있다.

ECMA-262 Edition5 : Lexical Environment and Environment Record
ECMA-262 Edition3 : Scope chain, Activation Object

자바스크립트 엔진은 코드를 인터프리팅 하기 전에 그 코드를 먼저 컴파일 한다.

변수 선언(생성)단계와 초기화 단계를 나누고
선언 단계에서는 그 선언이 소스코드의 어디에 위치하든
해당 스코프의 컴파일 단계에서 처리해 버리는 것이다.
(언어 스펙상으로 변수는 `렉시컬`환경이 인스턴스화되고 초기화될 때 생성된다고 한다. )
때문에 이런 선언단계가 스코프의 꼭대기로 호이스팅 되는 작업이라고 볼 수 있는 것이다.

클로져 = 함수 + 함수를 둘러싼 환경
함수를 둘러싼 환경이란 것이 바로 앞에서 설명했던 렉시컬 스코프이다.

**자바스크립트의 함수가 실행되었을때, 함수는 자신이 생성되었을때와 동일한 스코프 체인을 사용합니다. 그러므로, 당신은 내부 함수를 나중에 호출할 수 있습니다.**

클로저가 갱신된 외부함수의 변수에 접근함으로써, 외부 함수의 변수가 for문에 의해 변경될 경우 의도치 않은 버그가 발생할 수 있습니다.


# 호이스팅의 문제
지역변수를 선언하지 않는다면 문제를 일으킬 가능성이 높아집니다.

항상 지역변수를 사용하기 이전에 선언하도록 하십시오. JSHint를 사용하면 코드의 문법 오류나 스타일을 체크할 수 있습니다. 다음은 지역변수를 선언하지 않음으로 인해 문제가 발생한 경우입니다.

```javascript
// 지역변수를 var키워드로 선언하지 않았을 경우, 그것은 전역-범위(global-scope)가 됩니다.
var name = "Michael Jackson";
function showCelebrityName() {
     console.log(name);
}
function showOrdinaryPersonName() {
     name = "Johnny Evers";
     console.log(name);
}
showCelebrityName(); // Michael Jackson
// name 은 지역변수가 아닙니다. 이것은 전역변수 name을 변경해 버립니다.
showOrdinaryPersonName(); // Johnny Evers
// 이제 전역변수 name은 Johny Evers입니다. 더이상, 셀럽의 이름은 없습니다. -.-;;
showCelebrityName(); // Johnny Evers
// 해결책은 지역변수 선언시 var 키워드를 사용하는 것입니다.
function showOrdinaryPersonName() {
     var name = "Johnny Evers"; // 이제 name은 항상 지역변수이며, 전역변수를 덮어쓰지 않습니다.
     console.log(name);
}
```

만약, 변수가 최초 선언 없이(var 키워드를 사용하여) 초기화 되었다면, 이 변수는 자동으로 전역 컨텍스트에 추가됩니다:

```javascript
function showAge() {
     // age는 전역 변수입니다.
     age = 90;
     console.log(age);
}
showAge(); // 90
// age는 전역 변수이므로, 이런식으로도 호출될 수 있습니다.
console.log(age); // 90
```
